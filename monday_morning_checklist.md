# 月曜朝準備チェックリスト (2025-07-28)

## 🕐 タイムライン（JST）

### 日曜 21:00 (UTC 12:00) → 月曜 06:00 (JST)
```bash
# 自動実行：月曜朝チェック
0 21 * * 0 mt5_auto_start_fixed.py >> mt5_monday_check.log
```

### 月曜 09:00 → 22:00 (JST) 営業時間
```bash
# 自動実行：取引監視（15分間隔）
*/15 9-22 * * 1-5 CRON_MODE=1 mt5_trading_monitor_fixed.py
```

## ✅ 準備完了確認

### 🔧 システム構成
- ✅ **MT5**: 稼働中 (terminal64.exe)
- ✅ **リファクタリング版スクリプト**: 配置完了
- ✅ **YAML設定ファイル**: 4個すべて配置
- ✅ **共通ライブラリ**: lib/ パッケージ完成
- ✅ **cron設定**: 6個のジョブが稼働中

### 📊 EA設定
- ✅ **EA名**: JamesORB_v1.0
- ✅ **通貨ペア**: EURUSD
- ✅ **時間足**: M5 (5分足)
- ✅ **マジックナンバー**: 20250727
- ✅ **ロットサイズ**: 0.01

### 🤖 自動化スケジュール
- ✅ **Git自動保存**: 3分間隔
- ✅ **システム監視**: 5分間隔
- ✅ **MT5定期チェック**: 30分間隔
- ✅ **月曜朝チェック**: 日曜21:00 (UTC)
- ✅ **取引監視**: 平日9-22時、15分間隔
- ✅ **ログローテーション**: 営業時間、15分間隔

### 📁 ログファイル準備
- ✅ **MT5ログ**: MT5/Logs/ ディレクトリ
- ✅ **取引ログ**: MT5/Logs/Trading/ ディレクトリ
- ✅ **月曜チェックログ**: mt5_monday_check.log
- ✅ **取引監視ログ**: trading_monitor_cron.log

## 🎯 月曜朝の動作予測

### 06:00 JST - 市場開始前
1. 月曜朝チェック実行
2. MT5起動状態確認
3. EA設定確認
4. 設定妥当性検証

### 09:00 JST - 営業時間開始
1. 取引監視開始（15分間隔）
2. ポジション監視
3. 取引記録開始
4. エラーハンドリング・自動復旧

### 取引発生時
1. 新規ポジション自動検出
2. 取引データ記録 (JSON)
3. ログ出力・通知
4. サマリー生成

## 🚨 想定される課題と対策

### RPYC接続エラー
**現象**: Wine環境でのRPYC接続失敗
**対策**: 
- 自動リトライ機構（3回、10秒間隔）
- エラーログ記録
- MT5プロセス確認・再起動

### 初回取引検出
**現象**: 取引記録ファイル新規作成
**対策**:
- 自動ファイル作成
- アトミック書き込み
- バックアップ機能

### ネットワーク問題
**現象**: MT5サーバー接続不安定
**対策**:
- 接続確認機能
- 自動復旧機能
- エラー通知

## 📋 月曜朝確認すべき項目

### 1. ログ確認
```bash
tail -20 MT5/Logs/mt5_monday_check.log
tail -20 MT5/Logs/trading_monitor_cron.log
```

### 2. 取引状況確認
```bash
env CRON_MODE=1 python3 Scripts/mt5_trading_monitor_fixed.py
```

### 3. システム状態確認
```bash
python3 test_common_lib.py
```

### 4. MT5 EA状態確認
- MT5ターミナル「エキスパート」タブ
- JamesORB_v1.0の稼働状態
- EURUSD M5チャートの表示

---

**準備完了**: ✅ All Systems Go!  
**次回確認**: 2025-07-28 (月) 09:00 JST