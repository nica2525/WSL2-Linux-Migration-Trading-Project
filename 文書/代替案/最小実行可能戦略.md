# 最小実行可能戦略（2025年版）

## 🎯 現在の状況（2025-07-25更新）
**JamesORB戦略**: 統計分析完了・デモ運用開始
**新EA開発**: JamesORBデモ取引発生後に要件定義予定

## 🎯 新EA開発要件（準備段階）

### 目標設定
- **ドローダウン**: 20-25%（JamesORBの43.8%から改善）
- **リスクリワード**: 1.5以上（現在1.18から改善）
- **年利**: 20-30%維持
- **プロフィットファクター**: 1.3以上（現在1.205から改善）

### 開発方針
- **JamesORB実績分析**: デモ取引データを基に改善点特定
- **kiro設計主導**: 設計書・要件定義は kiro が作成
- **段階的実装**: Claude は kiro の設計に基づいて実装のみ

## 🧠 参考戦略仮説（旧版）

### 核心的仮説（参考）
**「時間的市場非効率性」**: 特定の時間帯に価格が前日レンジをブレイクする際、投資家の心理的バイアスと流動性の変化により、一時的な価格の過大反応が発生する。

---

## 🔧 戦略仕様

### 基本ロジック
```
【エントリー条件】
1. 時間: 日本時間 09:00-11:00（ロンドン・オープン重複時間）
2. 条件: 現在価格が前日高値/安値から20pips以上ブレイク
3. 確認: 10分間の持続でブレイクを確認

【エグジット条件】
1. 利確: +30pips
2. 損切: -20pips
3. 時間: 同日17:00で強制決済
```

### パラメータ（3個限定）
| パラメータ | 初期値 | 範囲 | 意味 |
|-----------|--------|------|------|
| **BreakPips** | 20 | 15-30 | ブレイク判定pips |
| **ProfitPips** | 30 | 25-40 | 利確pips |
| **StopPips** | 20 | 15-25 | 損切pips |

---

## 📊 統計的検証計画

### WFA設定
- **IS期間**: 24ヶ月（2年間の学習期間）
- **OOS期間**: 6ヶ月（半年間の検証期間）
- **ステップ**: 6ヶ月（半年毎の更新）
- **Purge期間**: 7日（週末を考慮）
- **Embargo期間**: 7日（情報リーク防止）

### 最小取引数要件
- **IS期間**: 最低300取引
- **OOS期間**: 最低75取引
- **統計的有意性**: p < 0.05

---

## 🎯 成功基準

### 第一段階（統計的有意性）
- [ ] OOS期間でのプロフィットファクター ≥ 1.1
- [ ] 統計的有意性 p < 0.05
- [ ] WFA効率 ≥ 0.5

### 第二段階（実用性）
- [ ] 最大ドローダウン ≤ 15%
- [ ] 勝率 ≥ 30%
- [ ] 全フォールドでの正の期待値

### 第三段階（堅牢性）
- [ ] パラメータ変更時の安定性
- [ ] 異なる通貨ペアでの汎用性
- [ ] 市場環境変化への対応力

---

## 🚫 複雑性制限

### 禁止事項
- [ ] 4個以上のパラメータ
- [ ] 重複するフィルター条件
- [ ] 相関の高い複数インジケーター
- [ ] 例外処理の多用

### 許可事項
- [ ] 基本的な時間フィルター
- [ ] シンプルな価格ブレイク判定
- [ ] 固定のリスク管理
- [ ] 基本的な統計検証

---

## 🔬 実装仕様

### MQL4実装例
```mql4
// 基本パラメータ
extern int BreakPips = 20;      // ブレイク判定pips
extern int ProfitPips = 30;     // 利確pips
extern int StopPips = 20;       // 損切pips

// 前日高値・安値取得
double PrevDayHigh = iHigh(NULL, PERIOD_D1, 1);
double PrevDayLow = iLow(NULL, PERIOD_D1, 1);

// 時間フィルター
bool IsTradeTime() {
    int hour = Hour();
    return (hour >= 9 && hour < 11);  // 09:00-11:00
}

// エントリー判定
bool CheckLongEntry() {
    return IsTradeTime() &&
           Ask > PrevDayHigh + BreakPips * Point;
}

bool CheckShortEntry() {
    return IsTradeTime() &&
           Bid < PrevDayLow - BreakPips * Point;
}
```

### Python検証実装
```python
def minimal_strategy(data, params):
    """最小実行可能戦略の実装"""

    results = []

    for i in range(len(data)):
        # 前日高値・安値
        prev_high = data.iloc[i-1]['high']
        prev_low = data.iloc[i-1]['low']

        # 現在価格
        current_price = data.iloc[i]['close']

        # 時間フィルター
        if not (9 <= data.iloc[i]['hour'] < 11):
            continue

        # エントリー判定
        if current_price > prev_high + params['break_pips'] * 0.0001:
            # ロングエントリー
            entry_price = current_price
            profit_target = entry_price + params['profit_pips'] * 0.0001
            stop_loss = entry_price - params['stop_pips'] * 0.0001

        elif current_price < prev_low - params['break_pips'] * 0.0001:
            # ショートエントリー
            entry_price = current_price
            profit_target = entry_price - params['profit_pips'] * 0.0001
            stop_loss = entry_price + params['stop_pips'] * 0.0001

    return results
```

---

## 📈 期待する結果

### 現実的な期待値
- **プロフィットファクター**: 1.1-1.3
- **勝率**: 35-45%
- **年間リターン**: 10-20%
- **最大ドローダウン**: 8-15%

### 統計的期待値
- **統計的有意性**: p < 0.05で優位性確認
- **WFA効率**: 0.5-0.8（IS性能の50-80%をOOSで維持）
- **一貫性**: 75%以上の期間で正の結果

---

## 🛡️ リスク管理

### パラメータ最適化リスク
- **制限**: 各パラメータ最大5段階まで
- **検証**: グリッドサーチでの全組み合わせ検証
- **補正**: DSRによる多重比較補正

### 市場環境リスク
- **対策**: 複数の市場環境期間での検証
- **監視**: ボラティリティ変化の影響確認
- **適応**: 環境変化時の戦略停止基準

---

## 📋 実装チェックリスト

### 開発フェーズ
- [ ] MQL4による基本実装
- [ ] Pythonによる検証システム統合
- [ ] パラメータ最適化機能
- [ ] 統計的検証機能

### 検証フェーズ
- [ ] 5年間データでのWFA実行
- [ ] 統計的有意性確認
- [ ] 複数通貨ペアでの検証
- [ ] ストレステスト実行

### 判定フェーズ
- [ ] 成功基準との照合
- [ ] 専門家による第三者評価
- [ ] 実機検証準備
- [ ] 次戦略への教訓抽出

---

## 🎊 成功の定義

### プロセス成功（結果に関係なく）
- **統計的手法**: 正しい検証プロセスの実行
- **学習価値**: 仮説検証による知見獲得
- **基盤構築**: 次戦略への発展可能性

### 結果成功（理想的な場合）
- **統計的優位性**: 偶然でない真の優位性検出
- **実用性**: 実機環境での利用可能性
- **持続性**: 長期的な利益維持能力

---

---

**🚀 2025年版更新**: JamesORB実績を基に新EA開発準備中
**管理者**: Claude Code（実装担当）
**次回更新**: kiro による新EA設計書作成時
