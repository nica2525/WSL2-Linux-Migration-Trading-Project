# Python側検証結果

**実施日**: 2025年7月20日  
**目的**: MT4との比較でロジック問題を特定

---

## 🎯 検証結果

### Python戦略（BreakoutStrategy）
- **期間**: 2024年1月-3月（2,161時間）
- **生成シグナル数**: 322件
- **シグナル率**: 14.90%
- **取引頻度**: 約1日1.3回

### 実装比較

#### **Python側実装（シンプル）**
```python
def generate_signals(self, data: pd.DataFrame, params: Dict) -> pd.Series:
    lookback = params.get('lookback', 20)
    rolling_high = data['High'].rolling(window=lookback).max()
    # 単純な高値ブレイクアウト
    breakout_condition = data['High'] > rolling_high.shift(1)
    return breakout_condition.fillna(False)
```

#### **MT4側実装（複雑・厳しい）**
```mql4
// 両時間軸でのブレイクアウト + 方向一致が必要
if(h4_breakout && h1_breakout && h4_direction == h1_direction)
```

---

## 🚨 根本原因特定

### **決定的な違い**

1. **Python**: H1単独の20期間ブレイクアウト
2. **MT4**: H4とH1両方でのブレイクアウト + 方向一致

### **条件厳しさの比較**
- **Python**: 単一条件 → 14.90%のシグナル率
- **MT4**: 複数AND条件 → 0%のシグナル率

### **問題の核心**
MT4実装は**過度に保守的**で、現実的な取引機会を完全に排除している。

---

## 📊 解決策

### 即座実行可能な修正
```mql4
// 現在（厳しすぎる）
if(h4_breakout && h1_breakout && h4_direction == h1_direction)

// 修正案1（H1のみ）
if(h1_breakout)

// 修正案2（OR条件）
if(h4_breakout || h1_breakout)
```

### 推奨アプローチ
1. **H1のみでテスト** → Pythonと同等の条件
2. **取引頻度確認** → 現実的な水準に調整
3. **段階的厳格化** → 必要に応じてフィルター追加

---

## 結論

**実装は無駄ではない。条件が厳しすぎるだけ。**

MT4側を条件緩和すれば、Python同等の取引頻度を実現可能。