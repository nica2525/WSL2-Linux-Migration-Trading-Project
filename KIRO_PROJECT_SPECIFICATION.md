# 🚀 Kiro AI IDE 設計計画作業依頼書

**作成日時**: 2025年7月18日 06:51 JST  
**作成者**: Claude Code  
**対象**: Kiro AI IDE (Amazon)  
**作業種別**: 実運用システム設計・フェーズ分割計画

---

## 📋 **プロジェクト概要**

### **プロジェクト名**
ブレイクアウト手法実運用システム統合プロジェクト

### **現在状況**
- ✅ **Python WFAシステム**: Gemini満点(5.0/5.0)評価獲得
- ✅ **並列処理最適化**: 19倍高速化・0.58秒実行
- ✅ **スリッパージ統合**: 現実的約定コスト考慮
- ❌ **MT4連携**: 未実装
- ❌ **実取引フロー**: 未実装

### **目標**
Python WFAシステム完成品を基に、実際の取引実行可能な統合システム構築

---

## 🎯 **作業依頼内容**

### **Kiro担当範囲**
1. **要件分析・仕様策定** (requirements.md生成)
2. **アーキテクチャ設計** (design.md生成)  
3. **実装計画・フェーズ分割** (tasks.md生成)
4. **品質基準・開発標準** (steering files生成)

### **作業制約**
- **読み取り専用**: 既存ファイル変更禁止
- **計画特化**: 実装コードは作成しない
- **Claude連携**: 設計→実装の分業体制

---

## 📊 **技術要求仕様**

### **実装必須コンポーネント**

#### **1. MT4 Expert Advisor (EA)**
```mql4
目的: Python WFA最適パラメータによるブレイクアウト戦略実行
要件:
- WFA結果から最適lookbackパラメータ取得
- リアルタイムブレイクアウト判定・エントリー実行
- ポジション管理・リスク制御
- バックテスト対応・パフォーマンス記録
```

#### **2. Python-MT4 Bridge**
```python
目的: PythonシグナルとMT4 EA間のデータ連携
要件:
- WFA最適化結果 → MT4パラメータ自動更新
- リアルタイム価格データ取得・配信
- 取引シグナル生成・MT4送信
- 取引結果フィードバック・分析
```

#### **3. Real-time Signal Generator**
```python
目的: 市場データ監視・取引シグナル生成
要件:
- 価格データリアルタイム取得 (ブローカーAPI/MT4)
- WFA最適パラメータ適用・ブレイクアウト判定
- スリッパージ・執行遅延考慮
- シグナル品質評価・信頼度算出
```

#### **4. Position Management System**
```python
目的: ポジション監視・リスク管理・成績追跡
要件:
- 自動ポジションサイジング計算
- ドローダウン監視・自動停止
- 日次・週次パフォーマンス分析
- システム健全性監視・アラート
```

---

## 🔧 **技術環境・制約条件**

### **開発環境**
```yaml
OS: Windows WSL2 (Ubuntu)
Python: 3.11+
MT4: MetaTrader 4 (MQL4)
既存システム: 
  - enhanced_parallel_wfa_with_slippage.py (Gemini 5.0/5.0)
  - advanced_slippage_model.py
  - cron自動化システム稼働中
```

### **運用制約**
```yaml
稼働時間: 09:00-22:00 (PC自動シャットダウン)
自動化: cron管理・systemd廃止済み
並列処理: 19並列ワーカー・0.58秒実行維持
品質基準: Gemini満点システム水準維持
```

### **パフォーマンス要件**
```yaml
応答性: リアルタイム価格処理 <100ms
可用性: 稼働時間99%以上
精度: WFA最適化精度維持
安全性: 自動停止・リスク制御
```

---

## 📁 **参照すべき既存ファイル**

### **メインシステム**
```
enhanced_parallel_wfa_with_slippage.py    # Gemini満点統合システム
advanced_slippage_model.py               # 高度スリッパージモデル
parallel_wfa_optimization.py             # 並列WFA最適化
wfa_config.json                         # 外部設定構造
```

### **技術仕様・履歴**
```
実運用ガイドライン.md                     # 実運用要件・課題
文書/記録/セッション記録_2025-07-17_MCPデータベース統合完了.md
CLAUDE.md                               # 開発制約・環境設定
現在の品質状況.md                        # 品質状況
Scripts/cron_*.py                       # 自動化システム
```

### **アーキテクチャ参考**
```
Scripts/system_health_checker.sh         # システム監視方式
Scripts/path_resolver.sh                # 動的パス解決
Scripts/smart_logrotate.sh              # ライフサイクル適応
```

---

## 🎯 **期待成果物**

### **1. .kiro/specs/requirements.md**
```markdown
期待内容:
- EARS記法によるユーザーストーリー
- MT4統合・Python連携要件詳細
- 受入基準・テスト条件
- エラーハンドリング・例外処理要件
```

### **2. .kiro/specs/design.md**
```markdown
期待内容:
- システムアーキテクチャ図
- コンポーネント間インターフェース設計
- データフロー・通信プロトコル
- セキュリティ・パフォーマンス考慮
```

### **3. .kiro/specs/tasks.md**
```markdown
期待内容:
- Phase 1-4 実装計画
- 各Phaseの依存関係・前提条件
- 工数見積もり・リスク分析
- マイルストーン・検証ポイント
```

### **4. .kiro/steering/product.md**
```markdown
期待内容:
- ブレイクアウト取引システム目的・価値
- ターゲットユーザー(トレーダー)
- 競合優位性(Gemini満点・高速化)
```

### **5. .kiro/steering/tech.md**
```markdown
期待内容:
- Python-MT4技術スタック選択理由
- アーキテクチャ決定事項
- パフォーマンス・セキュリティ方針
```

### **6. .kiro/steering/standards.md**
```markdown
期待内容:
- コーディング規約(Python/MQL4)
- テスト戦略・品質基準
- ドキュメント・ログ標準
```

---

## ⚠️ **重要制約・注意事項**

### **既存システム保護**
- **変更禁止**: 既存Gemini満点システムファイル
- **互換性**: 現在のcron自動化システム維持
- **性能**: 並列処理速度低下禁止

### **実装方針**
- **段階的**: Phase分割による段階実装
- **テスト優先**: 各Phase完了時点での検証
- **リスク最小**: 既存システム影響最小化

### **品質要求**
- **Gemini水準**: 設計品質5.0/5.0目標
- **実用性**: 実際の取引実行可能
- **保守性**: 長期運用・拡張可能

---

## 🚀 **作業開始指示**

### **ステップ1: プロジェクト理解**
1. 上記参照ファイル精読・現状把握
2. 技術要求・制約条件理解
3. 既存システムアーキテクチャ分析

### **ステップ2: 要件定義**
1. MT4統合要件のEARS記法文書化
2. Python-MT4連携インターフェース定義
3. リアルタイム処理・リスク管理要件

### **ステップ3: 設計計画**
1. 4コンポーネント統合アーキテクチャ設計
2. データフロー・通信方式決定
3. エラーハンドリング・監視方式設計

### **ステップ4: 実装計画**
1. Phase 1-4段階的実装計画
2. 依存関係・リスク分析
3. テスト戦略・検証ポイント定義

### **ステップ5: 品質基準**
1. 開発標準・コーディング規約
2. steering files作成
3. 継続的品質管理方針

---

## 📞 **連携・報告方法**

### **成果物配置**
- `.kiro/`ディレクトリ内への配置
- 各ファイルmarkdown形式
- 日本語・技術英語併用

### **Claude連携**
- 設計完了後Claude実装開始
- Phase単位での実装・テスト
- 継続的フィードバック・改善

---

**🎯 このプロジェクトにより、Gemini満点Pythonシステムから実際の取引実行可能な統合システムへ進化させることが目標です。**

**📋 Kiroの設計力とClaude実装力の最適分業により、高品質・実用的システム実現を期待しています。**

---

**依頼者**: Claude Code  
**最終更新**: 2025年7月18日 06:51 JST  
**承認待ち**: Kiro AI IDE実行開始